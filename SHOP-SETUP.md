# üõí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –∏ —Å–∏—Å—Ç–µ–º—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### Backend:
1. **–¢–∞–±–ª–∏—Ü—ã –ë–î** (–≤–∫–ª—é—á–µ–Ω—ã –≤ `backend/database/init.sql`):
   - `shop_items` - –ø—Ä–µ–¥–º–µ—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞ (—Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏)
   - `player_inventory` - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–æ–≤
   - `player_balance` - –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–æ–≤
   - `transactions` - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - `payment_orders` - –∑–∞–∫–∞–∑—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (YooKassa)
   - `voucher_codes` - –ø—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
   - –≤ —Ç–∞–±–ª–∏—Ü–µ `users` –ø–æ–ª–µ `role` (–¥–ª—è –∞–¥–º–∏–Ω-–ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

2. **API Endpoints**:
   - `/api/shop/items` - —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞
   - `/api/shop/balance` - –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞
   - `/api/shop/deposit/create` - —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (—Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ YooKassa)
   - `/api/shop/deposit/redeem` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
   - `/api/shop/purchase` - –ø–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
   - `/api/webhooks/yookassa` - webhook –æ—Ç YooKassa (—É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ ‚Üí –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)
   - `/api/inventory` - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞
   - `/api/inventory/check-online` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
   - `/api/inventory/use/:id` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞

### Frontend:
1. **–ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
   - `/shop` - –º–∞–≥–∞–∑–∏–Ω –ø—Ä–µ–¥–º–µ—Ç–æ–≤
   - `/inventory` - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞

2. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
   - Header - –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –º–∞–≥–∞–∑–∏–Ω–∞ –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `backend/database/init.sql`.

–ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ —Ç–∞–±–ª–∏—Ü—ã –º–∞–≥–∞–∑–∏–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
npx ts-node -r dotenv/config backend/src/scripts/setupDatabase.ts
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ MySQL:
```bash
# Windows PowerShell
mysql -h –í–ê–®_–•–û–°–¢ -u –í–ê–®_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ -p –í–ê–®_–ü–ê–†–û–õ–¨ dragonlost_web < backend/database/init.sql

# Linux/Mac
mysql -h –í–ê–®_–•–û–°–¢ -u –í–ê–®_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ -p –í–ê–®_–ü–ê–†–û–õ–¨ dragonlost_web < backend/database/init.sql
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

```bash
npm run dev
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–∞–±–ª–∏—Ü—ã –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î

–ï—Å–ª–∏ –±–∞–∑–∞ —É–∂–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ –±–µ–∑ —Ç–∞–±–ª–∏—Ü –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Ä–æ–ª–µ–π, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
mysql -h –í–ê–®_–•–û–°–¢ -u –í–ê–®_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ -p dragonlost_web < backend/database/migrations/001-shop-deposit.sql
```

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞ ¬´Duplicate column 'role'¬ª ‚Äî –µ—ë –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.

### 4. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã (–æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—è, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ä–µ—Å—É—Ä—Å—ã, –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã, –Ω–∞–±–æ—Ä—ã) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç–æ–º:

```bash
mysql -h –í–ê–®_–•–û–°–¢ -u –í–ê–®_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ -p dragonlost_web < backend/database/seed-shop-items.sql
```

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ `rust_item_code` –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É).

## üì¶ –ü—Ä–µ–¥–º–µ—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞

–í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:

### üî´ –û—Ä—É–∂–∏–µ
- AK-47 (150 –º–æ–Ω–µ—Ç)
- LR-300 (200 –º–æ–Ω–µ—Ç)
- Bolt Action Rifle (180 –º–æ–Ω–µ—Ç)
- Python Revolver (100 –º–æ–Ω–µ—Ç)
- Custom SMG (120 –º–æ–Ω–µ—Ç)

### üõ°Ô∏è –ë—Ä–æ–Ω—è
- Hazmat Suit (80 –º–æ–Ω–µ—Ç)
- Metal Facemask (60 –º–æ–Ω–µ—Ç)
- Metal Chest Plate (70 –º–æ–Ω–µ—Ç)
- Heavy Plate Armor (250 –º–æ–Ω–µ—Ç)

### üî® –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- Jackhammer (90 –º–æ–Ω–µ—Ç)
- Chainsaw (100 –º–æ–Ω–µ—Ç)

### üì¶ –†–µ—Å—É—Ä—Å—ã
- Metal Fragments x1000 (50 –º–æ–Ω–µ—Ç)
- High Quality Metal x100 (80 –º–æ–Ω–µ—Ç)
- Sulfur x1000 (60 –º–æ–Ω–µ—Ç)
- C4 x5 (300 –º–æ–Ω–µ—Ç)
- Rocket x10 (400 –º–æ–Ω–µ—Ç)

### üíä –ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã
- Medical Syringe x5 (40 –º–æ–Ω–µ—Ç)
- Large Medkit x3 (35 –º–æ–Ω–µ—Ç)

### üéÅ –ù–∞–±–æ—Ä—ã
- Starter Kit (250 –º–æ–Ω–µ—Ç)
- Raider Kit (500 –º–æ–Ω–µ—Ç)
- Builder Kit (300 –º–æ–Ω–µ—Ç)

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `seed-shop-items.sql` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø–æ—è–≤—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (M249, Thompson, SAR, MP5, –ø–∞—Ç—Ä–æ–Ω—ã, –≥—Ä–∞–Ω–∞—Ç—ã, –æ–¥–µ–∂–¥–∞, –∫–∏—Ä–∫–∏, —Ç–æ–ø–æ—Ä—ã, –¥–µ—Ä–µ–≤–æ/–∫–∞–º–µ–Ω—å/–º–µ—Ç–∞–ª–ª/—Å–µ—Ä–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –æ–±—ä—ë–º–∞—Ö, –±–∏–Ω—Ç—ã, –∞–Ω—Ç–∏—Ä–∞–¥, –Ω–∞–±–æ—Ä—ã Fighter/Sniper –∏ –¥—Ä.).

## üí∞ –°–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –±–∞–ª–∞–Ω—Å = 0.

### –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ YooKassa (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏)

1. –í `.env` —É–∫–∞–∂–∏—Ç–µ (–∫–ª—é—á–∏ –≤ [–ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa](https://yookassa.ru/my/merchant/integration/api-keys)):
   - `YOOKASSA_SHOP_ID` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞
   - `YOOKASSA_SECRET_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
   - `BASE_URL` ‚Äî URL —Å–∞–π—Ç–∞ –±–µ–∑ —Å–ª—ç—à–∞ –≤ –∫–æ–Ω—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `https://yoursite.com` –∏–ª–∏ `http://localhost:3000`)

2. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa –≤ —Ä–∞–∑–¥–µ–ª–µ [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è](https://yookassa.ru/my/http-notifications-settings) —É–∫–∞–∂–∏—Ç–µ URL —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
   - `https://–í–ê–®_–î–û–ú–ï–ù/api/webhooks/yookassa`
   - –í–∫–ª—é—á–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ **payment.succeeded**.

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å¬ª, –≤—ã–±–∏—Ä–∞–µ—Ç —Å—É–º–º—É –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –ÆKassa –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä, –±–∞–ª–∞–Ω—Å –∑–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ `external_id`).

### –ü—Ä–æ–º–æ–∫–æ–¥—ã

–ü—Ä–æ–º–æ–∫–æ–¥—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `voucher_codes`. –°–æ–∑–¥–∞—Ç—å –∫–æ–¥ –∏ –Ω–∞—á–∏—Å–ª–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:

```sql
INSERT INTO voucher_codes (code, amount) VALUES ('PROMO2025', 500.00);
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –≤ –±–ª–æ–∫–µ ¬´–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á—ë—Ç¬ª –∏ –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å¬ª. –û–¥–∏–Ω –∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑.

### –†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)

```sql
-- –ù–∞–π—Ç–∏ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Steam ID
SELECT id, username, steamid FROM users WHERE steamid = 'STEAM_ID_–ò–ì–†–û–ö–ê';

-- –î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
INSERT INTO player_balance (user_id, balance, total_earned) 
VALUES (USER_ID, 1000.00, 1000.00)
ON DUPLICATE KEY UPDATE 
  balance = balance + 1000.00,
  total_earned = total_earned + 1000.00;

-- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–∞–ª–∞–Ω—Å
UPDATE player_balance 
SET balance = balance + 1000.00, 
    total_earned = total_earned + 1000.00 
WHERE user_id = USER_ID;
```

## üñº –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

- –í –ë–î –≤ `shop_items.image_url` –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å:
  - **–í–Ω–µ—à–Ω–∏–π URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä `https://rustlabs.com/img/items180/rifle.ak.png`) ‚Äî –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–µ–≥–æ —Å–∞–π—Ç–∞.
  - **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å** –≤–∏–¥–∞ `/uploads/shop/rifle.ak.png` ‚Äî —Ñ–∞–π–ª –æ—Ç–¥–∞—ë—Ç—Å—è —Å –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞ –∏–∑ –ø–∞–ø–∫–∏ `backend/uploads/shop/`.

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–∞–ø–∫–∞ `backend/uploads/shop` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ–ª–æ–∂–∏—Ç—å —Å–≤–æ–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é; –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (–µ—Å–ª–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞) ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∞–π–ª –ø–æ–¥ –∏–º–µ–Ω–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, `{rust_item_code}.png` –∏ –≤ –ë–î –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å `/uploads/shop/{rust_item_code}.png`.

–§—Ä–æ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–π URL –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è –ø—É—Ç–µ–π, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å `/`.

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∏–≥—Ä–æ–∫–æ–≤:

1. **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è** —á–µ—Ä–µ–∑ Steam
2. **–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω** - –∫–Ω–æ–ø–∫–∞ "–ú–∞–≥–∞–∑–∏–Ω" –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
3. **–í—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã** –∏ –∫—É–ø–∏—Ç—å (–µ—Å–ª–∏ –µ—Å—Ç—å –±–∞–ª–∞–Ω—Å)
4. **–û—Ç–∫—Ä—ã—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å** - –∫–ª–∏–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí "–ú–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å"
5. **–ó–∞–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** –≤ –∏–≥—Ä–µ Rust
6. **–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã** - –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –Ω–∞–∂–∞—Ç—å "–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç"

### –í–∞–∂–Ω–æ:
- ‚ö†Ô∏è **–ü—Ä–µ–¥–º–µ—Ç—ã –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –±—É–¥—É—á–∏ –æ–Ω–ª–∞–π–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!**
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ –≤ –±–∞–∑–µ PlayerDatabase
- –ò–≥—Ä–æ–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–Ω–ª–∞–π–Ω, –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±—ã–ª–∞ –º–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RCON

–í —Ñ–∞–π–ª–µ `backend/src/routes/inventory.ts` –µ—Å—Ç—å TODO –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å RCON:

```typescript
// TODO: –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RCON –¥–ª—è –≤—ã–¥–∞—á–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–≥—Ä–µ
// –ü—Ä–∏–º–µ—Ä: await executeRCONCommand(`inventory.giveto ${steamid} ${item.rust_item_code} ${item.quantity}`);
```

–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å RCON –∫–ª–∏–µ–Ω—Ç –¥–ª—è Rust
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `executeRCONCommand`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Rust —Å–µ—Ä–≤–µ—Ä—É

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞
```javascript
GET /api/shop/items
// –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/shop/items?category=weapon
```

### –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
```javascript
GET /api/shop/balance
// –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```

### –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
```javascript
POST /api/shop/deposit/create
{ "amount": 500 }
// –û—Ç–≤–µ—Ç: { "redirect_url": "https://yookassa.ru/..." }
```

### –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```javascript
POST /api/shop/deposit/redeem
{ "code": "PROMO2025" }
```

### –ö—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
```javascript
POST /api/shop/purchase
{
  "item_id": 1,
  "quantity": 1
}
```

### –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
```javascript
GET /api/inventory
// –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å
```javascript
GET /api/inventory/check-online
// –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
```javascript
POST /api/inventory/use/:id
// –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–Ω–ª–∞–π–Ω
```

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ö–ª–∏–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é
- "üéí –ú–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å" - –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- "üö™ –í—ã—Ö–æ–¥" - –≤—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

### –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ:
- üü¢ –ó–µ–ª–µ–Ω—ã–π - –∏–≥—Ä–æ–∫ –æ–Ω–ª–∞–π–Ω (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã)
- üî¥ –ö—Ä–∞—Å–Ω—ã–π - –∏–≥—Ä–æ–∫ –æ—Ñ—Ñ–ª–∞–π–Ω (–ø—Ä–µ–¥–º–µ—Ç—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–ª—å–∑—è)

## ‚öôÔ∏è –î–∞–ª—å–Ω–µ–π—à–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç** –∑–∞ –∏–≥—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è
2. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã**
3. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
4. **–ê–¥–º–∏–Ω-–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ** (—ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Ä–æ–ª–∏ `admin` –≤ `users.role`)
5. **–°–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏**
6. **–†–µ–π—Ç–∏–Ω–≥ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π**

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –≤—ã–¥–∞—é—Ç—Å—è –≤ –∏–≥—Ä–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ–Ω–ª–∞–π–Ω –ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω RCON (—Å–º. —Ä–∞–∑–¥–µ–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

### –ë–∞–ª–∞–Ω—Å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `player_balance` —Å–æ–∑–¥–∞–Ω–∞

### –ü—Ä–µ–¥–º–µ—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã: `SHOW TABLES LIKE 'shop_%';`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ: `SELECT COUNT(*) FROM shop_items;`
- –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –ø—É—Å—Ç—ã–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª "–£—Å—Ç–∞–Ω–æ–≤–∫–∞")
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5000
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ API

### –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ –∑–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ÆKassa —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL webhook –∏ –≤–∫–ª—é—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ payment.succeeded
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –≤ `.env` —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–ª—é—á–∞–º–∏ –º–∞–≥–∞–∑–∏–Ω–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ `/api/webhooks/yookassa`
